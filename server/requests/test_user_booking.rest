@baseUrl = http://localhost:5000/api

# ---------------------------------------------------
# AUTHENTICATION
# ---------------------------------------------------

# Login to get Access Token
# @name login
POST http://localhost:5000/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

# ---------------------------------------------------
# FLOW A: SUCCESSFUL BOOKING (Hold -> Confirm)
# ---------------------------------------------------

### Get Available Seats (Check availability before booking)
GET {{baseUrl}}/showtimes/11/seats
Content-Type: application/json

### Create a Booking (Hold Seats)
# @name createBooking
POST {{baseUrl}}/bookings
Content-Type: application/json
Authorization: Bearer {{login.response.body.accessToken}}

{
  "showtimeId": 11,
  "paymentMethod": "CASH",
  "seatIds": [103, 104] 
}

### Confirm the Booking
# Uses the ID from the previous request automatically
POST {{baseUrl}}/bookings/confirm
Content-Type: application/json
Authorization: Bearer {{login.response.body.accessToken}}

{
  "bookingId": {{createBooking.response.body.booking.id}}
}

# ---------------------------------------------------
# FLOW B: CANCEL BOOKING (Hold -> Cancel)
# ---------------------------------------------------

### Create Another Booking (To be cancelled)
# @name createBookingToCancel
POST {{baseUrl}}/bookings
Content-Type: application/json
Authorization: Bearer {{login.response.body.accessToken}}

{
  "showtimeId": 11,
  "paymentMethod": "CREDIT_CARD",
  "seatIds": [106]
}

### Cancel the Booking
# Uses the ID from Step 5, for example: 22
POST {{baseUrl}}/bookings/22/cancel
Authorization: Bearer {{login.response.body.accessToken}}

# ---------------------------------------------------
# VERIFICATION
# ---------------------------------------------------

### Get My Bookings (Should see one CONFIRMED and one CANCELLED)
GET {{baseUrl}}/bookings/my-bookings
Authorization: Bearer {{login.response.body.accessToken}}